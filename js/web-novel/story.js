// ==========================================
// ФАЙЛ СЮЖЕТА И НАСТРОЕК (Формат JSON-объекта)
// ==========================================

// Здесь мы заранее объявляем ссылки на фоны, чтобы не копировать длинные URL.
// Можно использовать локальные файлы, например: "img/forest.jpg"
const bgRoom = "https://kronas.com.ua/Media/files/filemanager/Blog-pics/elegantnaja-spalnaja-komnata/1.jpg";
const bgForest = "https://abrakadabra.fun/uploads/posts/2021-12/1640438886_1-abrakadabra-fun-p-fon-za-oknom-les-sosni-1.jpg";

// Заглушки для спрайтов (персонажей)
const charFox = "https://cdn.pixabay.com/photo/2017/01/31/13/14/animal-2023924_1280.png"; // Маска/Силуэт

// ГЛАВНЫЙ ОБЪЕКТ СЮЖЕТА
const storyData = {
  
  // ВЕТКА: "start" (игра всегда начинается с нее)
  "start": [
    { 
      // Кадр 1: Сцена в комнате.
      text: "Февральская метель бьет в окно. На часах 2:00 ночи.", 
      bg: bgRoom // Устанавливаем фон комнаты
    },
    { 
      // Кадр 2: Появляется мысль героя.
      text: "Очередная лабораторная по программированию никак не хочет компилироваться. Глаза слипаются.", 
      name: "Серёжа" // Имя говорящего
    },
    { 
      // Кадр 3: Смена фона.
      text: "Вдруг с улицы доносится странный, почти человеческий свист.", 
      bg: bgForest // Фон меняется на темный лес за окном
    },
    { 
      // Кадр 4: Развилка сюжета. Кнопки выбора.
      text: "Что мне делать?", 
      choices: [
        { text: "Выглянуть в окно, чтобы проверить", target: "look_window" }, // Перекинет на ветку "look_window"
        { text: "Надеть наушники и продолжить кодить", target: "ignore" }     // Перекинет на ветку "ignore"
      ]
    }
  ],

  // ВЕТКА: "look_window"
  "look_window": [
    { 
      text: "Ты подходишь к замерзшему стеклу и протираешь его рукавом.", 
      bg: bgForest 
    },
    { 
      text: "Там кто-то есть...", 
      name: "Ты" 
    },
    { 
      // Кадр с появлением персонажа!
      text: "Среди деревьев стоит фигура в странной маске.", 
      char: charFox // Показываем спрайт
    },
    { 
      text: "Фигура медленно поднимает руку и указывает прямо на тебя.", 
      char: charFox // Спрайт остается на экране
    },
    { 
      text: "Ты в ужасе отдергиваешь шторы. Кажется, эта ночь будет долгой.", 
      char: "" // Убираем спрайт (передаем пустую строку)
    },
    { 
      text: "КОНЦОВКА 1: Начало кошмара.", 
      choices: [{ text: "Начать заново (Возвращение через смерть)", target: "start" }] 
    }
  ],

  // ВЕТКА: "ignore"
  "ignore": [
    { 
      text: "Ты надеваешь наушники. Включаешь любимый трек на полную громкость.", 
      bg: bgRoom 
    },
    { 
      text: "Проходит пара часов. Код наконец-то работает без ошибок.", 
      name: "Серёжа" 
    },
    { 
      text: "Утром ты сдаешь лабу преподу. Все прошло спокойно.", 
      name: "Серёжа" 
    },
    { 
      text: "КОНЦОВКА 2: Истинный студент.", 
      choices: [{ text: "Начать заново", target: "start" }] 
    }
  ]
};